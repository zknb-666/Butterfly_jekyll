<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<!-- SEO -->
{% if jekyll.environment == 'production' %}
  {% seo %}
{% endif %}

<!-- Title -->
<title>
  {% if page.title %}
    {{ page.title }} | {{ site.title }}
  {% else %}
    {{ site.title }}{% if site.description %} - {{ site.description }}{% endif %}
  {% endif %}
</title>

<!-- Favicon -->
{% if site.theme_config.favicon %}
  <link rel="icon" href="{{ site.theme_config.favicon | relative_url }}">
{% endif %}

<!-- Open Graph / Facebook -->
<meta property="og:type" content="{% if page.layout == 'post' %}article{% else %}website{% endif %}">
<meta property="og:title" content="{% if page.title %}{{ page.title }}{% else %}{{ site.title }}{% endif %}">
<meta property="og:description" content="{% if page.excerpt %}{{ page.excerpt | strip_html | strip_newlines | truncate: 160 }}{% else %}{{ site.description }}{% endif %}">
<meta property="og:url" content="{{ page.url | absolute_url }}">
<meta property="og:site_name" content="{{ site.title }}">
{% if page.image %}
  <meta property="og:image" content="{{ page.image | absolute_url }}">
{% endif %}

<!-- Twitter -->
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:title" content="{% if page.title %}{{ page.title }}{% else %}{{ site.title }}{% endif %}">
<meta name="twitter:description" content="{% if page.excerpt %}{{ page.excerpt | strip_html | strip_newlines | truncate: 160 }}{% else %}{{ site.description }}{% endif %}">
{% if page.image %}
  <meta name="twitter:image" content="{{ page.image | absolute_url }}">
{% endif %}

<!-- Preconnect -->
{% include head/preconnect.html %}

<!-- Fonts -->
{% include head/fonts.html %}

<!-- Stylesheets -->
<link rel="stylesheet" href="{{ '/assets/css/main.css' | relative_url }}">

<!-- Theme Config -->
<script>
  window.BUTTERFLY_CONFIG = {
    root: '{{ site.baseurl }}/',
    language: '{{ site.lang | default: "zh-CN" }}',
    theme_config: {{ site.theme_config | jsonify }}
  };
</script>

{% include head/analytics.html %}
{% include head/structured-data.html %}

<!-- Custom Head -->
{% if site.custom_head %}
  {{ site.custom_head }}
{% endif %}
